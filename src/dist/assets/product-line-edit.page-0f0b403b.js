import{d,R as s,r,c as I,j as n,P as L,N as x,L as g,a as R}from"./index-e705403d.js";import{B as E}from"./button-adb08d27.js";function T(e){const{result:[a]}=d.useRxData(s.BATTERY_PRODUCT_LINES,t=>t.findOne().where("id").equals(e.productLineId).and({manufacturer_id:e.manufacturerId})),{result:[u]}=d.useRxData(s.BATTERY_MANUFACTURERS,t=>t.findOne().where("id").equals(e.manufacturerId)),f=r.useMemo(()=>e.productLineId==="__new__"?"New":a?a.name.length<=15?`edit "${a.name}"`:`edit "${a.name.substring(0,15)}..."`:"not found...",[e.productLineId,a]),c=d.useRxDB(),[i,o]=r.useState("");r.useEffect(()=>{a&&o(a.name)},[a]);const[m,l]=r.useState(!1),_=r.useCallback(async()=>{l(!0);try{const t={id:e.productLineId==="__new__"?I.rnd():e.productLineId,manufacturer_id:e.manufacturerId,name:i};await c[s.BATTERY_PRODUCT_LINES].upsert(t),e.f7router.navigate(`/battery_manufacturers/${t.manufacturer_id}/product_lines/${t.id}`,{reloadCurrent:!0})}finally{l(!1)}},[c,i,e.f7router,e.manufacturerId,e.productLineId]);return n.jsxs(L,{name:"Battery Manufacturer Edit Page",children:[n.jsx(x,{title:f,backLink:e.productLineId==="__new__"?"Manufacturers":u==null?void 0:u.name,children:n.jsx(E,{slot:"right",onClick:_,loading:m,children:"Save"})}),n.jsx(g,{strongIos:!0,outlineIos:!0,dividersIos:!0,form:!0,formStoreData:!0,id:"battery-product-line-edit-form",children:n.jsx(R,{label:"Name",name:"name",type:"text",clearButton:!0,placeholder:"e.g. LiHV 4S 15.2V 1300mAh 120C XT60",required:!0,onInput:t=>o(t.target.value),value:i})})]})}export{T as default};
