import{d as c,R as b,r as t,i as y,j as u,P as _,N as M,L as S,a as x}from"./index-e705403d.js";import{B}from"./button-adb08d27.js";function h(e){const n=c.useRxCollection(b.BATTERY_MANUFACTURERS),I=t.useMemo(()=>n==null?void 0:n.find().where("id").equals(e.manufacturerId),[n,e.manufacturerId]),{result:s}=c.useRxQuery(I,{pageSize:1}),a=t.useMemo(()=>s==null?void 0:s[0],[s]),g=t.useMemo(()=>e.manufacturerId==="__new__"?"New":a?`edit "${a.name}"`:"not found...",[a,e.manufacturerId]),l=c.useRxDB(),[i,d]=t.useState(""),[o,f]=t.useState("");t.useEffect(()=>{a&&(d(a.name),f(a.website??""))},[a]);const[R,m]=t.useState(!1),v=t.useCallback(async()=>{m(!0);try{const r={id:e.manufacturerId==="__new__"?y.rnd():e.manufacturerId,name:i,website:o};await l[b.BATTERY_MANUFACTURERS].upsert(r),e.f7router.navigate(`/battery_manufacturers/${r.id}`,{reloadCurrent:!0})}finally{m(!1)}},[l,i,o,e.f7router]);return u.jsxs(_,{name:"Battery Manufacturer Edit Page",children:[u.jsx(M,{title:g,backLink:"Manufacturers",children:u.jsx(B,{slot:"right",onClick:v,loading:R,children:"Save"})}),u.jsxs(S,{strongIos:!0,outlineIos:!0,dividersIos:!0,form:!0,formStoreData:!0,id:"battery-manufacturer-edit-form",children:[u.jsx(x,{label:"Name",name:"name",type:"text",clearButton:!0,placeholder:"Name / Label",required:!0,onInput:r=>d(r.target.value),value:i}),u.jsx(x,{label:"Website",name:"website",type:"url",placeholder:"Website",clearButton:!0,onInput:r=>f(r.target.value),value:o})]})]})}export{h as default};
