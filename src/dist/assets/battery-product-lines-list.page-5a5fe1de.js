import{d as f,R as h,r as s,j as e,P as v,N as C,e as R,f as x,I as y,A as B,g as p,L as _,h as I}from"./index-e705403d.js";import{u as w,F as E,L as c}from"./use-all-items-froms-collection-with-infinite-pagination.hook-48e72128.js";import{u as N}from"./use-delete-battery-manufacturer.hook-20b1e76e.js";function D(t){const n=f.useRxCollection(h.BATTERY_MANUFACTURERS),j=s.useMemo(()=>n==null?void 0:n.find().where("id").equals(t.manufacturerId),[n,t.manufacturerId]),{result:i}=f.useRxQuery(j,{pageSize:1}),a=s.useMemo(()=>i==null?void 0:i[0],[i]),{items:o,fetchMore:b,isFetching:u,isExhausted:L,resetList:d}=w(h.BATTERY_PRODUCT_LINES),k=s.useCallback(async r=>{d(),r()},[d]),g=s.useMemo(()=>o.sort((r,l)=>r.name.localeCompare(l.name)),[o]),m=N(),P=s.useCallback(async()=>{await m(t.manufacturerId),t.f7router.navigate("/battery-manufacturers",{reloadCurrent:!0})},[m,t.f7router,t.manufacturerId]);return e.jsxs(v,{name:"battery-manufacturer",infinite:!L,onInfinite:b,ptr:!0,ptrMousewheel:!0,onPtrRefresh:k,children:[e.jsxs(C,{backLink:"Manufacturers",children:[e.jsxs(R,{children:[(a==null?void 0:a.name)??"not found...",e.jsx(x,{popoverOpen:".title-click-popover-menu",style:{display:"inline"},children:e.jsx(y,{style:{marginLeft:".25rem"},ios:"f7:chevron_down",md:"material:chevron_down",size:"small"})})]}),e.jsx(B,{children:(a==null?void 0:a.website)&&e.jsx(x,{external:!0,href:a.website,target:"_blank",children:"Website"})})]}),e.jsx(E,{position:"right-bottom",slot:"fixed",onClick:()=>t.f7router.navigate(`/battery_manufacturers/${t.manufacturerId}/product_lines/__new__/edit`),children:e.jsx(y,{ios:"f7:plus",md:"material:add"})}),e.jsx(p,{className:"title-click-popover-menu",children:e.jsxs(_,{children:[e.jsx(I,{link:`/battery_manufacturers/${t.manufacturerId}/edit`,popoverClose:!0,title:"Edit Details"}),e.jsx(I,{popoverClose:!0,title:"Delete",onClick:P,color:"red",colorTheme:"red"})]})}),e.jsxs(_,{dividersIos:!0,outlineIos:!0,strongIos:!0,className:u?"skeleton-text":"",children:[!u&&o.length===0&&e.jsx(c,{title:"Add your first product-line...",link:`/battery_manufacturers/${t.manufacturerId}/product_lines/__new__/edit`}),u&&new Array(5).fill(0).map((r,l)=>e.jsx(c,{title:"Lorem Ipsum",link:"#"},l)),g.map(r=>e.jsx(c,{title:r.name,link:`/battery_manufacturers/${t.manufacturerId}/product_lines/${r.id}`},r.id))]})]})}export{D as default};
